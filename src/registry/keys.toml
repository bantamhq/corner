# Keybinding definitions
# Order matters: TOML order = display order in footer, help, and README

# =============================================================================
# Daily Mode + Shared Keys (interleaved for optimal display order)
# =============================================================================

# --- Entry Creation ---

[[keys]]
id = "new_entry_bottom"
key = "Enter"
modes = ["daily_normal"]
help_sections = ["daily"]
footer = ["normal_daily"]
short_text = "New entry"
short_description = "New entry at end"
long_description = "Create a new entry at the bottom of the list"

[[keys]]
id = "new_entry_below"
key = "o"
modes = ["daily_normal"]
help_sections = ["daily"]
short_text = "New below"
short_description = "New entry below"
long_description = "Create a new entry below the selected one"

[[keys]]
id = "new_entry_above"
key = "O"
modes = ["daily_normal"]
help_sections = ["daily"]
short_text = "New above"
short_description = "New entry above"
long_description = "Create a new entry above the selected one"

# --- Entry Editing ---

[[keys]]
id = "edit_entry"
key = "i"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
footer = ["normal_daily"]
short_text = "Edit"
short_description = "Edit selected"
long_description = "Edit the currently selected entry"

[[keys]]
id = "toggle_entry"
key = "c"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
footer = ["normal_daily", "normal_filter"]
short_text = "Toggle"
short_description = "Toggle task complete"
long_description = "Toggle task completion status"

[[keys]]
id = "delete_entry"
key = "d"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
footer = ["normal_filter"]
short_text = "Delete"
short_description = "Delete entry"
long_description = "Delete the selected entry"

[[keys]]
id = "yank_entry"
key = "y"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Yank"
short_description = "Yank to clipboard"
long_description = "Copy the selected entry to clipboard"

[[keys]]
id = "undo"
key = "u"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Undo"
short_description = "Undo last action"
long_description = "Undo the last action"

[[keys]]
id = "redo"
key = "U"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Redo"
short_description = "Redo undone action"
long_description = "Redo the last undone action"

# --- Tag Operations ---

[[keys]]
id = "remove_last_tag"
key = "x"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Detag"
short_description = "Remove last tag"
long_description = "Remove the last trailing tag from the selected entry"

[[keys]]
id = "remove_all_tags"
key = "X"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Detag all"
short_description = "Remove all tags"
long_description = "Remove all trailing tags from the selected entry"

# --- Navigation ---

[[keys]]
id = "move_down"
key = "j"
alt_key = "↓"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Down"
short_description = "Navigate down"
long_description = "Move selection to the next entry"

[[keys]]
id = "move_up"
key = "k"
alt_key = "↑"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Up"
short_description = "Navigate up"
long_description = "Move selection to the previous entry"

[[keys]]
id = "jump_to_first"
key = "g"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "First"
short_description = "Jump to first"
long_description = "Jump to the first entry"

[[keys]]
id = "jump_to_last"
key = "G"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Last"
short_description = "Jump to last"
long_description = "Jump to the last entry"

[[keys]]
id = "prev_day"
key = "h"
alt_key = "["
modes = ["daily_normal"]
help_sections = ["daily"]
short_text = "Prev day"
short_description = "Previous day"
long_description = "Navigate to the previous day"

[[keys]]
id = "next_day"
key = "l"
alt_key = "]"
modes = ["daily_normal"]
help_sections = ["daily"]
short_text = "Next day"
short_description = "Next day"
long_description = "Navigate to the next day"

[[keys]]
id = "goto_today"
key = "t"
modes = ["daily_normal"]
help_sections = ["daily"]
short_text = "Today"
short_description = "Go to today"
long_description = "Navigate to today's entries"

# --- View Management ---

[[keys]]
id = "toggle_hide_completed"
key = "z"
modes = ["daily_normal"]
help_sections = ["daily"]
short_text = "Hide done"
short_description = "Toggle hide completed"
long_description = "Toggle visibility of completed tasks"

[[keys]]
id = "sort_entries"
key = "s"
modes = ["daily_normal"]
help_sections = ["daily"]
short_text = "Sort"
short_description = "Sort entries"
long_description = "Sort entries by type and completion status"

[[keys]]
id = "enter_reorder_mode"
key = "r"
modes = ["daily_normal"]
help_sections = ["daily"]
short_text = "Reorder"
short_description = "Reorder mode"
long_description = "Enter reorder mode to manually arrange entries"

[[keys]]
id = "enter_selection_mode"
key = "v"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Select"
short_description = "Selection mode"
long_description = "Enter selection mode for multi-entry operations"

[[keys]]
id = "quick_filter_tag"
key = "0-9"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Tag filter"
short_description = "Filter favorite tag"
long_description = "Quick filter by favorite tag (configured in config.toml)"

[[keys]]
id = "append_favorite_tag"
key = "Shift+0-9"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Add tag"
short_description = "Append favorite tag"
long_description = "Append favorite tag to the selected entry (configured in config.toml)"

[[keys]]
id = "cycle_entry_type_normal"
key = "Shift+Tab"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Cycle type"
short_description = "Cycle entry type"
long_description = "Cycle through entry types (task → note → event)"

# --- Mode Switching ---

[[keys]]
id = "return_to_filter"
key = "Tab"
modes = ["daily_normal"]
help_sections = ["daily"]
short_text = "To filter"
short_description = "Return to filter"
long_description = "Return to the previous filter view"

[[keys]]
id = "toggle_journal"
key = "`"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Journal"
short_description = "Toggle Global/Project journal"
long_description = "Switch between Global and Project journal"

[[keys]]
id = "enter_filter_mode"
key = "/"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
footer = ["normal_daily"]
short_text = "Filter"
short_description = "Filter mode"
long_description = "Enter filter mode to search entries"

[[keys]]
id = "enter_command_mode"
key = ":"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Commands"
short_description = "Command mode"
long_description = "Enter command mode for :quit, :open, etc."

[[keys]]
id = "show_help"
key = "?"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
footer = ["normal_daily", "normal_filter"]
short_text = "Help"
short_description = "Show help"
long_description = "Display the help overlay with all keybindings"

[[keys]]
id = "open_datepicker"
key = "\\"
modes = ["shared_normal"]
help_sections = ["daily", "filter"]
short_text = "Calendar"
short_description = "Open datepicker"
long_description = "Open the calendar datepicker to navigate to a specific date"

# =============================================================================
# Filter Normal Mode
# =============================================================================

[[keys]]
id = "filter_quick_add"
key = "Enter"
modes = ["filter_normal"]
help_sections = ["filter"]
short_text = "Quick add"
short_description = "Quick add to today"
long_description = "Add a new entry to today matching the current filter type"

[[keys]]
id = "refresh_filter"
key = "r"
modes = ["filter_normal"]
help_sections = ["filter"]
footer = ["normal_filter"]
short_text = "Refresh"
short_description = "Refresh results"
long_description = "Refresh the filter results"

[[keys]]
id = "exit_filter"
key = "Esc"
alt_key = "Tab"
modes = ["filter_normal"]
help_sections = ["filter"]
footer = ["normal_filter"]
short_text = "Exit"
short_description = "Exit to daily"
long_description = "Exit filter view and return to daily view"

# =============================================================================
# Edit Mode
# =============================================================================

[[keys]]
id = "save_edit"
key = "Enter"
modes = ["edit"]
help_sections = ["edit"]
footer = ["edit"]
short_text = "Save"
short_description = "Save and exit"
long_description = "Save the entry and exit edit mode"

[[keys]]
id = "save_and_new"
key = "Tab"
modes = ["edit"]
help_sections = ["edit"]
footer = ["edit"]
short_text = "Save+new"
short_description = "Save and new"
long_description = "Save the current entry and create a new one"

[[keys]]
id = "cycle_entry_type"
key = "Shift+Tab"
modes = ["edit"]
help_sections = ["edit"]
footer = ["edit"]
short_text = "Type"
short_description = "Toggle entry type"
long_description = "Cycle through entry types (task, note, event)"

[[keys]]
id = "cancel_edit"
key = "Esc"
modes = ["edit"]
help_sections = ["edit"]
footer = ["edit"]
short_text = "Cancel"
short_description = "Cancel"
long_description = "Cancel editing without saving"

# =============================================================================
# Reorder Mode
# =============================================================================

[[keys]]
id = "reorder_move_down"
key = "j"
alt_key = "↓"
modes = ["reorder"]
help_sections = ["reorder"]
footer = ["reorder"]
short_text = "Move down"
short_description = "Move entry down"
long_description = "Move the selected entry down in the list"

[[keys]]
id = "reorder_move_up"
key = "k"
alt_key = "↑"
modes = ["reorder"]
help_sections = ["reorder"]
short_text = "Move up"
short_description = "Move entry up"
long_description = "Move the selected entry up in the list"

[[keys]]
id = "reorder_save"
key = "r"
alt_key = "Enter"
modes = ["reorder"]
help_sections = ["reorder"]
footer = ["reorder"]
short_text = "Save"
short_description = "Save"
long_description = "Save the new order"

[[keys]]
id = "reorder_cancel"
key = "Esc"
modes = ["reorder"]
help_sections = ["reorder"]
footer = ["reorder"]
short_text = "Cancel"
short_description = "Cancel"
long_description = "Cancel reordering and restore original order"

# =============================================================================
# Selection Mode
# =============================================================================

[[keys]]
id = "selection_toggle"
key = "v"
modes = ["selection"]
help_sections = ["selection"]
footer = ["selection"]
short_text = "Toggle selection"
short_description = "Toggle selection"
long_description = "Toggle selection on the current entry"

[[keys]]
id = "selection_extend_range"
key = "V"
modes = ["selection"]
help_sections = ["selection"]
footer = ["selection"]
short_text = "Select Range"
short_description = "Select range"
long_description = "Select all entries between last selection and cursor"

[[keys]]
id = "selection_move_down"
key = "j"
alt_key = "↓"
modes = ["selection"]
help_sections = ["selection"]
short_text = "Down"
short_description = "Move cursor down"
long_description = "Move cursor down without changing selection"

[[keys]]
id = "selection_move_up"
key = "k"
alt_key = "↑"
modes = ["selection"]
help_sections = ["selection"]
short_text = "Up"
short_description = "Move cursor up"
long_description = "Move cursor up without changing selection"

[[keys]]
id = "selection_delete"
key = "d"
modes = ["selection"]
help_sections = ["selection"]
footer = ["selection"]
short_text = "Delete"
short_description = "Delete selected"
long_description = "Delete all selected entries"

[[keys]]
id = "selection_toggle_complete"
key = "c"
modes = ["selection"]
help_sections = ["selection"]
short_text = "Toggle"
short_description = "Toggle completion"
long_description = "Toggle completion status of all selected entries"

[[keys]]
id = "selection_yank"
key = "y"
modes = ["selection"]
help_sections = ["selection"]
footer = ["selection"]
short_text = "Yank"
short_description = "Yank selected"
long_description = "Copy all selected entries to clipboard"

[[keys]]
id = "selection_remove_last_tag"
key = "x"
modes = ["selection"]
help_sections = ["selection"]
short_text = "Detag"
short_description = "Remove last tag"
long_description = "Remove the last trailing tag from all selected entries"

[[keys]]
id = "selection_remove_all_tags"
key = "X"
modes = ["selection"]
help_sections = ["selection"]
short_text = "Detag all"
short_description = "Remove all tags"
long_description = "Remove all trailing tags from all selected entries"

[[keys]]
id = "selection_append_tag"
key = "Shift+0-9"
modes = ["selection"]
help_sections = ["selection"]
short_text = "Add tag"
short_description = "Append favorite tag"
long_description = "Append favorite tag to all selected entries"

[[keys]]
id = "selection_cycle_type"
key = "Shift+Tab"
modes = ["selection"]
help_sections = ["selection"]
short_text = "Cycle type"
short_description = "Cycle entry type"
long_description = "Cycle through entry types on all selected entries"

[[keys]]
id = "selection_exit"
key = "Esc"
modes = ["selection"]
help_sections = ["selection"]
footer = ["selection"]
short_text = "Exit"
short_description = "Exit selection"
long_description = "Exit selection mode and return to normal mode"

# =============================================================================
# Help Popup
# =============================================================================

[[keys]]
id = "help_scroll_down"
key = "j"
alt_key = "↓"
modes = ["help"]
help_sections = ["help"]
short_text = "Down"
short_description = "Scroll down"
long_description = "Scroll the help content down"

[[keys]]
id = "help_scroll_up"
key = "k"
alt_key = "↑"
modes = ["help"]
help_sections = ["help"]
short_text = "Up"
short_description = "Scroll up"
long_description = "Scroll the help content up"

[[keys]]
id = "close_help"
key = "?"
alt_key = "Esc"
modes = ["help"]
help_sections = ["help"]
short_text = "Close"
short_description = "Close help"
long_description = "Close the help overlay"

# =============================================================================
# Text Editing (used in edit, command, and query modes)
# =============================================================================

[[keys]]
id = "cursor_left"
key = "←"
modes = ["text_editing"]
help_sections = ["text_editing"]
short_text = "Left"
short_description = "Move cursor left"
long_description = "Move cursor one character to the left"

[[keys]]
id = "cursor_right"
key = "→"
modes = ["text_editing"]
help_sections = ["text_editing"]
short_text = "Right"
short_description = "Move cursor right"
long_description = "Move cursor one character to the right"

[[keys]]
id = "cursor_word_left"
key = "Alt+B"
alt_key = "Ctrl+←"
modes = ["text_editing"]
help_sections = ["text_editing"]
short_text = "Word left"
short_description = "Move cursor one word left"
long_description = "Move cursor to the start of the previous word"

[[keys]]
id = "cursor_word_right"
key = "Alt+F"
alt_key = "Ctrl+→"
modes = ["text_editing"]
help_sections = ["text_editing"]
short_text = "Word right"
short_description = "Move cursor one word right"
long_description = "Move cursor to the end of the next word"

[[keys]]
id = "cursor_to_start"
key = "Home"
alt_key = "Ctrl+A"
modes = ["text_editing"]
help_sections = ["text_editing"]
short_text = "Start"
short_description = "Move cursor to start"
long_description = "Move cursor to the beginning of the line"

[[keys]]
id = "cursor_to_end"
key = "End"
alt_key = "Ctrl+E"
modes = ["text_editing"]
help_sections = ["text_editing"]
short_text = "End"
short_description = "Move cursor to end"
long_description = "Move cursor to the end of the line"

[[keys]]
id = "delete_char_before"
key = "Backspace"
modes = ["text_editing"]
help_sections = ["text_editing"]
short_text = "Backspace"
short_description = "Delete char before cursor"
long_description = "Delete the character before the cursor"

[[keys]]
id = "delete_char_after"
key = "Delete"
modes = ["text_editing"]
help_sections = ["text_editing"]
short_text = "Delete"
short_description = "Delete char after cursor"
long_description = "Delete the character after the cursor"

[[keys]]
id = "delete_word_before"
key = "Ctrl+W"
modes = ["text_editing"]
help_sections = ["text_editing"]
short_text = "Del word"
short_description = "Delete word before cursor"
long_description = "Delete the word before the cursor"

[[keys]]
id = "delete_word_after"
key = "Alt+D"
modes = ["text_editing"]
help_sections = ["text_editing"]
short_text = "Del word"
short_description = "Delete word after cursor"
long_description = "Delete from cursor to end of word"

[[keys]]
id = "delete_to_start"
key = "Ctrl+U"
modes = ["text_editing"]
help_sections = ["text_editing"]
short_text = "Del start"
short_description = "Delete to start"
long_description = "Delete from cursor to beginning of line"

[[keys]]
id = "delete_to_end"
key = "Ctrl+K"
modes = ["text_editing"]
help_sections = ["text_editing"]
short_text = "Del end"
short_description = "Delete to end"
long_description = "Delete from cursor to end of line"

# =============================================================================
# Datepicker Mode
# =============================================================================

[[keys]]
id = "datepicker_move_left"
key = "h"
alt_key = "←"
modes = ["datepicker"]
help_sections = ["date"]
short_text = "Left"
short_description = "Previous day"
long_description = "Move selection to the previous day"

[[keys]]
id = "datepicker_move_right"
key = "l"
alt_key = "→"
modes = ["datepicker"]
help_sections = ["date"]
short_text = "Right"
short_description = "Next day"
long_description = "Move selection to the next day"

[[keys]]
id = "datepicker_move_up"
key = "k"
alt_key = "↑"
modes = ["datepicker"]
help_sections = ["date"]
short_text = "Up"
short_description = "Previous week"
long_description = "Move selection up one week"

[[keys]]
id = "datepicker_move_down"
key = "j"
alt_key = "↓"
modes = ["datepicker"]
help_sections = ["date"]
short_text = "Down"
short_description = "Next week"
long_description = "Move selection down one week"

[[keys]]
id = "datepicker_prev_month"
key = "["
modes = ["datepicker"]
help_sections = ["date"]
short_text = "← Month"
short_description = "Previous month"
long_description = "Navigate to the previous month"

[[keys]]
id = "datepicker_next_month"
key = "]"
modes = ["datepicker"]
help_sections = ["date"]
short_text = "Month →"
short_description = "Next month"
long_description = "Navigate to the next month"

[[keys]]
id = "datepicker_prev_year"
key = "Y"
modes = ["datepicker"]
help_sections = ["date"]
short_text = "Prev year"
short_description = "Previous year"
long_description = "Navigate to the previous year"

[[keys]]
id = "datepicker_next_year"
key = "y"
modes = ["datepicker"]
help_sections = ["date"]
short_text = "Next year"
short_description = "Next year"
long_description = "Navigate to the next year"

[[keys]]
id = "datepicker_today"
key = "t"
modes = ["datepicker"]
help_sections = ["date"]
short_text = "Today"
short_description = "Jump to today"
long_description = "Jump to today's date in the calendar"

[[keys]]
id = "datepicker_confirm"
key = "Enter"
modes = ["datepicker"]
help_sections = ["date"]
short_text = "Go"
short_description = "Navigate to date"
long_description = "Navigate to the selected date"

[[keys]]
id = "datepicker_cancel"
key = "\\"
alt_key = "Esc"
modes = ["datepicker"]
help_sections = ["date"]
short_text = "Cancel"
short_description = "Close datepicker"
long_description = "Close datepicker without navigating"

# Footer-only entry for compact datepicker popup (not shown in help)
[[keys]]
id = "datepicker_footer_nav_month"
key = "[]"
modes = ["datepicker"]
footer = ["datepicker"]
short_text = "Month"
short_description = "Month"
long_description = "Navigate months"

[[keys]]
id = "datepicker_footer_nav_year"
key = "y/Y"
modes = ["datepicker"]
footer = ["datepicker"]
short_text = "Year"
short_description = "Year"
long_description = "Navigate years"

